<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    @import url('https://fonts.googleapis.com/css?family=Quicksand:300');
body {
    background: linear-gradient(to bottom, #333333, #444444); /* Змінено кольори градієнта */
    margin: 0;
    padding: 0;
    display: flex;
    height: 100vh;
    font-family: 'Quicksand', sans-serif;
}
button {
    font-size: 36px; /* Збільшено розмір шрифту */
    background-color: #444;
    color: #fff;
    border: 2px solid #555;
    border-radius: 10px; /* Збільшено радіус закругленості */
    padding: 14px 24px; /* Збільшено внутрішні відступи */
    cursor: pointer;
    transition: background-color 0.3s, color 0.3s;
}

button:hover {
    background-color: #555;
}
img {
    width: 320px; /* Змінено максимальну ширину фото */
    height: 320px; /* Залишено максимальну висоту фото */
}
  .block {
    border: 1px solid #555;
    box-sizing: border-box;
  }

  .block:nth-child(1),
  .block:nth-child(3) {
    width: 30%;
    display: flex;
    flex-direction: column;
  }

  .block:nth-child(1) .part, .block:nth-child(3) .part {
    width: 100%;
    height: 20%;
    display: flex;
    align-items: flex-end;
    justify-content: center;
  }

  .block:nth-child(1) .part:last-child, .block:nth-child(3) .part:last-child {
    height: 80%;
        align-items: center; /* Вирівнювання фото в центрі вертикалі */
    justify-content: center; /* Вирівнювання фото в центрі горизонталі */
  }

  .block:nth-child(2) {
    width: 40%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }

  .block:nth-child(2) .part {
    width: 100%;
    height: 20%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .block:nth-child(2) .part:nth-child(2) {
    height: 60%;
    display: flex;
    align-items: center;
  }

  .block:nth-child(2) .part:last-child {
    height: 20%;
    display: flex;
    align-items: center;
    justify-content: center;
        display: flex;
    flex-direction: column;
  }

.partn:nth-child(1),
.partn:nth-child(3) {
    flex: 45%;
    height: 100%;
}

.partn:nth-child(2) {
    flex: 10%;
    height: 100%;
}
  .block:nth-child(2) .part {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .partn {
    display: flex;
    align-items: center;
    justify-content: center;
  }

#username_1, #number1, #username_2, #number2, #time, #dvikrapku {
    width: 100%;
    height: 20%;
    text-align: center;
    line-height: 100px;
    color: #e0e0e0;
}
#username_1, #number1 {
    font-size: 56px; /* Новий розмір шрифту */
    text-shadow: 0 0 20px blue; /* Це значення потрібно вираховувати вручну, щоб вирівняти текст по вертикалі */
 }
 #username_2, #number2 {
    font-size: 56px; /* Новий розмір шрифту */
    text-shadow: 0 0 20px red; /* Це значення потрібно вираховувати вручну, щоб вирівняти текст по вертикалі */
 }
 #time, #dvikrapku {
    font-size: 92px; /* Новий розмір шрифту */
    text-shadow: 0 0 20px lightgray; /* Це значення потрібно вираховувати вручну, щоб вирівняти текст по вертикалі */
 }
 #number1, #number2, #dvikrapku {
    font-size: 250px;
 }
 #mode {
    font-size: 24px;
    text-shadow: 0 0 20px lightgray;
     color: #e0e0e0;
 }
</style>
<title>billiards-pool</title>
</head>
<body>
  <div class="block">
    <div class="part"><span id="username_1"></span></div>
    <div class="part"><img src="" alt="Фото користувача 1" id="photo_1"></div>
  </div>
  <div class="block">
    <div class="part" id="time">
        <time class="time">00:00:00</time>
    </div>
    <div class="part">
        <div class="partn" id="number1">0</div>
        <div class="partn" id="dvikrapku">:</div>
        <div class="partn" id="number2">0</div>
    </div>
    <div class="part">
        <span id="mode"></span>
        <button id="FinishButton">FINISH</button>
    </div>
  </div>
  <div class="block">
    <div class="part"><span id="username_2"></span></div>
    <div class="part"><img src="" alt="Фото користувача 2" id="photo_2"></div>
  </div>
<script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js";
        import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyBcTxPbjijLfs6n3Dw9A1ZAWcRCHHv_yGQ",
  authDomain: "billiards-pool-8184f.firebaseapp.com",
  databaseURL: "https://billiards-pool-8184f-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "billiards-pool-8184f",
  storageBucket: "billiards-pool-8184f.appspot.com",
  messagingSenderId: "144934324163",
  appId: "1:144934324163:web:ba9b9a43e2b926e6851f76"
};
        const app = initializeApp(firebaseConfig);

        const db = getDatabase();
        const number1 = document.querySelector("#number1");
        const number2 = document.querySelector("#number2");
        var n1 = 0;
        var n2 = 0;

        function DisplayCurrentNumber(currentNumber) {
            if (typeof currentNumber === 'number') {
                number1.textContent = currentNumber;
                n1 = currentNumber;
            } else {
                number1.textContent = "Invalid data";
            }
        }

        function DisplayCurrentNumber2(currentNumber2) {
            if (typeof currentNumber2 === 'number') {
                number2.textContent = currentNumber2;
                n2 = currentNumber2;
            } else {
                number2.textContent = "Invalid data";
            }
        }

        const number1Ref = ref(db, "number/number1");
        onValue(number1Ref, (snapshot) => {
            const currentNumber = snapshot.val();
            DisplayCurrentNumber(currentNumber);
        });

        const number2Ref = ref(db, "number/number2");
        onValue(number2Ref, (snapshot) => {
            const currentNumber2 = snapshot.val();
            DisplayCurrentNumber2(currentNumber2);
        });




        const urlParams = new URLSearchParams(window.location.search);
        
        const id_1 = urlParams.get("id_1");
        const username_1 = urlParams.get("username_1");
        const photo_url_1 = urlParams.get("photo_url_1");
        
        const id_2 = urlParams.get("id_2");
        const username_2 = urlParams.get("username_2");
        const photo_url_2 = urlParams.get("photo_url_2");
        
        const mode = urlParams.get("mode");

        document.getElementById("mode").textContent = mode;
        // document.getElementById("id_1").textContent = id_1;
        document.getElementById("username_1").textContent = username_1;
        document.getElementById("photo_1").src = photo_url_1;
        
        // document.getElementById("id_2").textContent = id_2;
        document.getElementById("username_2").textContent = username_2;
        document.getElementById("photo_2").src = photo_url_2;

let t = document.querySelector('time');
t.started = new Date;
t.update = ms => t.innerHTML = new Date(ms).toISOString().split(/T|\./)[1]
setInterval(() => t.update(new Date - t.started), 500);


const FinishButton = document.querySelector('#FinishButton');

FinishButton.addEventListener('click', () => {

 window.location.href = `save.html?id_1=`+id_1+`&id_2=`+id_2+`&n1=`+n1+`&n2=`+n2+`&time=`+t.innerHTML;

});
    const colors = [
  "red", "blue", "green", "yellow", "pink", "orange", "purple",
  "brown", "gray", "cyan", "lime", "magenta", "teal", "indigo",
  "violet", "maroon", "navy", "olive", "coral", "gold",
  "salmon", "aquamarine", "chocolate", "darkgreen", "lavender",
  "midnightblue", "peru", "royalblue", "sienna", "tomato"
];

let availableColors = [...colors]; // Створюємо копію списку кольорів

function getRandomColor() {
  if (availableColors.length === 0) {
    availableColors = [...colors]; // Якщо всі кольори вже використані, перезапускаємо список
  }
  
  const randomIndex = Math.floor(Math.random() * availableColors.length);
  const selectedColor = availableColors.splice(randomIndex, 1)[0]; // Видаляємо вибраний кольор зі списку
  return selectedColor;
}

const mmr1Color = getRandomColor();
const mmr2Color = getRandomColor();


number1.style.textShadow = `0 0 20px ${mmr1Color}`;
number2.style.textShadow = `0 0 20px ${mmr2Color}`;

document.getElementById("username_1").style.textShadow = `0 0 20px ${mmr1Color}`;
document.getElementById("username_2").style.textShadow = `0 0 20px ${mmr2Color}`;


document.documentElement.style.setProperty('--mmr1Color', mmr1Color);
document.documentElement.style.setProperty('--mmr2Color', mmr2Color);

const photo1 = document.getElementById("photo_1");
const photo2 = document.getElementById("photo_2");

function toggleFirePulseAnimation1() {
  if (n1 == 7) { // Перевірка на значення number1
    photo1.classList.add("fire-pulse-animation1"); // Додаємо клас з анімацією
  } else {
    photo1.classList.remove("fire-pulse-animation1"); // Видаляємо клас з анімацією
  }
}

function toggleFirePulseAnimation2() {
  if (n2 == 7) { // Перевірка на значення number1
    photo2.classList.add("fire-pulse-animation2"); // Додаємо клас з анімацією
  } else {
    photo2.classList.remove("fire-pulse-animation2"); // Видаляємо клас з анімацією
  }
}
function toggleFirePulseAnimation() {
  if (n2 == 8 || n1 == 8) { 
    photo1.classList.remove("fire-pulse-animation1");
    photo2.classList.remove("fire-pulse-animation2"); // Видаляємо клас з анімацією
  }
}
function toggleFirePulseAnimation1_1(n) {
  const animationClass = `fire-pulse-animation1-${n}`;

  if (n1 === n) { 
    photo1.classList.add(animationClass); 
  } else {
    photo1.classList.remove(animationClass);
  }
}
function toggleFirePulseAnimation1_2(n) {
  const animationClass = `fire-pulse-animation2-${n}`;

  if (n2 === n) { 
    photo2.classList.add(animationClass); 
  } else {
    photo2.classList.remove(animationClass);
  }
}





// Виклик функції для початкового налаштування анімації
toggleFirePulseAnimation1();
toggleFirePulseAnimation2();
toggleFirePulseAnimation();

// Перевіряємо значення number1 при кожному оновленні
setInterval(() => {
  toggleFirePulseAnimation1();
  toggleFirePulseAnimation2();
  toggleFirePulseAnimation();
  for (let i = 1; i <= 6; i++) {
  (function(n) {
    toggleFirePulseAnimation1_1(n);
    toggleFirePulseAnimation1_2(n);
  })(i);
}

}, 1000); // Змініть інтервал на більший або менший, за потреби

</script>
<style>
@keyframes firePulse1 {
  0%, 100% {
    box-shadow: 0 0 5px white, 0 0 10px var(--mmr1Color), 0 0 20px var(--mmr1Color);
  }
  50% {
    box-shadow: 0 0 30px white, 0 0 50px var(--mmr1Color), 0 0 150px var(--mmr1Color);
  }
}

.fire-pulse-animation1 {
  animation: firePulse1 1.5s infinite;
}

@keyframes firePulse2 {
  0%, 100% {
    box-shadow: 0 0 5px white, 0 0 10px var(--mmr2Color), 0 0 20px var(--mmr2Color);
  }
  
  50% {
    box-shadow: 0 0 10px white, 0 0 50px var(--mmr2Color), 0 0 100px var(--mmr2Color);
  }
}

.fire-pulse-animation2 {
  animation: firePulse2 1.5s infinite;
}

@keyframes firePulse1-1 { 50% { box-shadow: 0 0 30px white, 0 0 150px var(--mmr1Color), 0 0 700px var(--mmr1Color); } }
.fire-pulse-animation1-1 { animation: firePulse1-1 2s; }
@keyframes firePulse1-2 { 50% { box-shadow: 0 0 30px white, 0 0 150px var(--mmr1Color), 0 0 700px var(--mmr1Color); } }
.fire-pulse-animation1-2 { animation: firePulse1-2 2s; }
@keyframes firePulse1-3 { 50% { box-shadow: 0 0 30px white, 0 0 150px var(--mmr1Color), 0 0 700px var(--mmr1Color); } }
.fire-pulse-animation1-3 { animation: firePulse1-3 2s; }
@keyframes firePulse1-4 { 50% { box-shadow: 0 0 30px white, 0 0 150px var(--mmr1Color), 0 0 700px var(--mmr1Color); } }
.fire-pulse-animation1-4 { animation: firePulse1-4 2s; }
@keyframes firePulse1-5 { 50% { box-shadow: 0 0 30px white, 0 0 150px var(--mmr1Color), 0 0 700px var(--mmr1Color); } }
.fire-pulse-animation1-5 { animation: firePulse1-5 2s; }
@keyframes firePulse1-6 { 50% { box-shadow: 0 0 30px white, 0 0 150px var(--mmr1Color), 0 0 700px var(--mmr1Color); } }
.fire-pulse-animation1-6 { animation: firePulse1-6 2s; }


@keyframes firePulse2-1 { 50% { box-shadow: 0 0 30px white, 0 0 150px var(--mmr2Color), 0 0 700px var(--mmr2Color); } }
.fire-pulse-animation2-1 { animation: firePulse2-1 2s; }
@keyframes firePulse2-2 { 50% { box-shadow: 0 0 30px white, 0 0 150px var(--mmr2Color), 0 0 700px var(--mmr2Color); } }
.fire-pulse-animation2-2 { animation: firePulse2-2 2s; }
@keyframes firePulse2-3 { 50% { box-shadow: 0 0 30px white, 0 0 150px var(--mmr2Color), 0 0 700px var(--mmr2Color); } }
.fire-pulse-animation2-3 { animation: firePulse2-3 2s; }
@keyframes firePulse2-4 { 50% { box-shadow: 0 0 30px white, 0 0 150px var(--mmr2Color), 0 0 700px var(--mmr2Color); } }
.fire-pulse-animation2-4 { animation: firePulse2-4 2s; }
@keyframes firePulse2-5 { 50% { box-shadow: 0 0 30px white, 0 0 150px var(--mmr2Color), 0 0 700px var(--mmr2Color); } }
.fire-pulse-animation2-5 { animation: firePulse2-5 2s; }
@keyframes firePulse2-6 { 50% { box-shadow: 0 0 30px white, 0 0 150px var(--mmr2Color), 0 0 700px var(--mmr2Color); } }
.fire-pulse-animation2-6 { animation: firePulse2-6 2s; }


</style>
</body>
</html>
